<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Scaffold Overmind</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <div class="row" style="background-color: #444">
            <div class="col-md-12" id="conn-status">
                <span v-bind:class="status_class"><span id="conn-icon">‚óè</span> {{status}}</span>
                {{path}}
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <table class="table">
                    <tr>
                        <th></th>
                        <th>free</th>
                        <th>in transit</th>
                        <th>fixed</th>
                    </tr>
                    <tr>
                        <td>RS</td>
                        <td>3</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>RH</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>RR</td>
                        <td>0</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>screw</td>
                        <td>10</td>
                        <td>1</td>
                        <td>0</td>
                    </tr>
                </table>

                <div id="workers">
                    <div class="panel panel-info" v-for="worker in workers">
                        <div class="panel-heading">
                            <h3 class="panel-title">Worker #{{worker.human_id}} <span style="font-size:80%; color: lightgray">#{{worker.hw_id}}</span></h3>
                        </div>
                        <div class="panel-body">
                            {{worker.loco}} Working Carrying: RS, screw<br/>

                            <button class="btn btn-default" title="Go to home position">
                              <span class="glyphicon glyphicon-home"></span>
                            </button>

                            <button v-on:click='update_info' class="btn btn-default" title="update">
                              <span class="glyphicon glyphicon-refresh"></span>
                            </button>

                            <!-- header -->
                            <div style="overflow:hidden">
                              <div style="float:left">
                                <h4>D</h4>
                                <button v-on:click='d_up()' class="btn btn-default" title="update">
                                  <span class="glyphicon glyphicon-arrow-up"></span>
                                </button>
                                <br/>

                                <button v-on:click='d_down()' class="btn btn-default" title="update">
                                  <span class="glyphicon glyphicon-arrow-down"></span>
                                </button>
                                {{worker.out[0][1]}}
                                <br/>
                                <button v-on:click='d_downdown()' class="btn btn-warning" title="update">
                                  <span class="glyphicon glyphicon-arrow-down"></span>
                                </button>
                              </div>

                              <div style="float:left">
                                <h4>SCR</h4>
                                <button v-on:click='scr_up()' class="btn btn-default" title="update">
                                  <span class="glyphicon glyphicon-arrow-up"></span>
                                </button>
                                <br/>
                                <button v-on:click='scr_down()' class="btn btn-default" title="update">
                                  <span class="glyphicon glyphicon-arrow-down"></span>
                                </button>
                                {{worker.out[0][0]}}
                              </div>

                              <div style="float:left">
                                <h4>S</h4>

                                {{worker.out[1][2]}}
                                <br/>

                                <button v-on:click="command('e1s100')" class="btn btn-default" title="unfasten screw">
                                  unlock
                                </button>
                                <button v-on:click="command('e1s0')" class="btn btn-default" title="stop screw">
                                  <span class="glyphicon glyphicon-stop"></span>
                                </button>
                                <button v-on:click="command('e1s-100')" class="btn btn-default" title="fasten screw">
                                  lock
                                </button>
                              </div>
                            </div>

                            <div>
                              <h4>T</h4>
                              <button v-on:click="command('e500t-70T80,1!t0')" class="btn btn-primary" title="Find origin forward(500ms)">
                                <span class="glyphicon glyphicon-arrow-up"></span>
                              </button>
                              <button v-on:click='t_step_f()' class="btn btn-default" title="go forward for a moment">
                                <span class="glyphicon glyphicon-arrow-up"></span>
                              </button>
                              {{worker.out[1][0]}}
                              <br/>
                              <button v-on:click='t_step_b()' class="btn btn-default" title="go backward for a moment">
                                <span class="glyphicon glyphicon-arrow-down"></span>
                              </button>
                              O:{{worker.out[1][1]}}

                               <line-chart :width="300" :height="200" :data="worker.readings"></line-chart>
                            </div>

                            <pre v-for="msg in worker.messages">{{msg}}</pre>
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-md-8">
                <div id="viewport"></div>
                <button id="add_rs" class="btn btn-default">+RS</button>
                Make it DnD
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/86/three.min.js"></script>
    <script src="./3p/trackball.js"></script>
    <script src="./3p/STLLoader.js"></script>
    <script src="./main.js"></script>
</body>

</html>
